async function extractZip() { const fileInput = document.getElementById('fileInput'); const output = document.getElementById('output'); const downloadButton = document.getElementById('downloadButton'); output.innerHTML = ''; // Clear output extractedFiles = []; // Reset extracted files if (fileInput.files.length === 0) { output.innerHTML = 'Please upload a ZIP file.'; return; } const file = fileInput.files[0]; const jszip = new JSZip(); try { const zipContent = await jszip.loadAsync(file); output.innerHTML = '
Extracted Files and Directories:
'; // Convert files object to an array const fileList = Object.values(zipContent.files); // Function to display files and directories function displayFiles(files, parent) { const ul = document.createElement('ul'); parent.appendChild(ul); files.forEach(zipFile => { const li = document.createElement('li'); li.textContent = zipFile.name; extractedFiles.push(zipFile); // Store extracted file if (zipFile.dir) { li.style.fontWeight = 'bold'; // Make directory names bold } ul.appendChild(li); // If the file is a directory, call this function recursively if (zipFile.dir) { const children = Object.values(zipFile.children || {}); displayFiles(children, li); } }); } displayFiles(fileList, output); downloadButton.style.display = 'block'; // Show download button } catch (error) { output.innerHTML = `Error extracting ZIP: ${error.message}`; } }
